# <center>Correction</center>

### Prérequis

- [README.md](README.md)
- Il faut s'assurer que l'application soit en marche sur le port 5000
- SQLite3
- Curl

### Liste des fonctionnalités implémentées

| Fonctionnalité | Indications pour tester                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| A1 (10/10)            | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/infractions-csv-to-db>    ou avec la commande : `curl -X GET -i 'http://127.0.0.1:5000/api/infractions-csv-to-db'`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| A2  (5/5)          | Allez a l'url : <http://127.0.0.1:5000/recherche-infraction>   ou cliquez sur le boutton Recherche sur la page d'accueil et remplir les champs. par : "nom de l'etablissement"                                                                                      ,   "proprietaire" ou "rue" et cliquez sur le boutton Rechercher.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| A3  (5/5)           | A minuit chaque jour un message est imprimé sur la console : "Schedular started". Cela indique le debut de l'extraction des infractions. La base de données sera mise à jour.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| A4  (0/10)            | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/contraventions> <br/> Voir la [documentation](http://127.0.0.1:5000/doc#api_contraventions_get) pour plus de détails          - *Route ne donne aucun résultat*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| A5  (10/10)           | Aller a l'url : <http://127.0.0.1:5000>   La recherche peut etre faite par dates                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| A6    (10/10)         | Allez a l'url : <http://127.0.0.1:5000>   La recherche peut etre faite en cliquant sur la liste deroulante.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| B1   (5/5)          | **Exécuter les commandefs ci-dessous dans le terminal** <br/> **1.** Se conneceter à la base de données _infractions.db_ : `sqlite3 db/infractions.db` <br/> **2.** Dans le terminal _sqlite3_ : `DELETE FROM Infractions WHERE id_poursuite IN (SELECT id_poursuite FROM Infractions ORDER BY RANDOM() LIMIT 3);` pour supprimer aléatoirement 3 infractions de la base de données <br/> **3.** Quitter le terminal _sqlite3_ : `Ctrl + Z` <br/> **4.** Mettre à jour la base de donées : `curl -X GET -i 'http://127.0.0.1:5000/api/infractions-csv-to-db'` <br/> Accéder à la boîte [GMail](https://mail.google.com) du destinataire (Voir [config.yaml](config.yaml)) et ouvrir le nouveau message                                                                                                                                                                                                                                                                                                                         |
| B2  (0/10)           | Compte Twitter : [@Infractions_MTL](https://twitter.com/Infractions_MTL)     *Compte twitter n'affiche rien*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| C1  (10/10)           | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/infractions-etablissements/json> <br/> Voir la [documentation](http://127.0.0.1:5000/doc#api_infractions_etablissements__format__get) pour plus de détails                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| C2   (5/5)          | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/infractions-etablissements/xml> <br/> Voir la [documentation](http://127.0.0.1:5000/doc#api_infractions_etablissements__format__get) pour plus de détails                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| C3   (5/5)          | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/infractions-etablissements/csv> <br/> Voir la [documentation](http://127.0.0.1:5000/doc#api_infractions_etablissements__format__get) pour plus de détails                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| D1  (15/15)          | Allez a l'url : <http://127.0.0.1:5000/plainte> une plainte sera deposee apres le remplissage de tous les champs.     visiter la [documentation](http://127.0.0.1:5000/doc#api_demande_inspections_post) pour plus de détails.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| D2 (5/5)          | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/supprimer-inspection/<int:id_inspection>> <br/> Voir la [documentaion](http://127.0.0.1:5000/doc#api_supprimer_inspection__int_id_inspection__delete) pour plus de détails.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| D3 (15/15)            | Lors de la recherche par dates dans la page d'accueil : <http://127.0.0.1:5000> les resultats possèdent un bouton supprimer. l'action supprime l'etablissement. Un boutton modifier est disponible pour la modification de l'établissement. la modification peut etre faite par nom de l'etablissement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| D4  (15/15)           | Une procedure d'authentification de type "Basic Auth" est disponible pour les fonctions de suppression et de modification de la fonctionnalitee D3. Le "username":"admin" et le "password":"admin" sont hard coded dans la route et sont verifiés lors de l'appel Ajax.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| E1  (13/15)            | Envoyer une requête à l'url : <http://127.0.0.1:5000/api/inscription/traitement> <br/> Voir la [documentaion](http://127.0.0.1:5000/doc#api_inscription_traitement_post) pour plus de détails.    *Exemple de template n'a pas le bon format*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| E2  (15/15)           | **Suivre les liens ci-dessous** <br> [Inscription](http://127.0.0.1:5000/inscription) <br> [Authentification](http://127.0.0.1:5000/login) <br> [Profil](http://127.0.0.1:5000/profil)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| E3  (5/5)           | **Exécuter les commandefs ci-dessous dans le terminal** <br/> **1.** Se connecter à la base de données _utilisateurs.db_ : `sqlite3 db/utilisateurs.db` <br/> **2.** Dans le terminal _sqlite3_, exécuter cette commande : `SELECT etablissements FROM Utilisateurs WHERE id == 2;` et noter le résultat <br/> **3.** Quitter le terminal _sqlite3_ : `Ctrl + Z` <br/> **4.** Se connecter à la base de données _infractions.db_`sqlite3 db/infractions.db` <br/> **5.** Supprimer quelques inrfactions de la base de données : `DELETE FROM Infractions WHERE id_business IN (<ID>, <ID>, <ID>, <ID>, etc.) LIMIT 5;` où _ID_ correspond à un des ID pris en note lors de l'étape 2 <br/> **6.** Quitter le terminal _sqlite3_ : `Ctrl + Z` <br/> **7.** Mettre à jour la base de données : `curl -X GET -i 'http://127.0.0.1:5000/api/infractions-csv-to-db'` <br/> Accéder à la boîte [GMail](https://mail.google.com) du destinataire (Voir [config.yaml](config.yaml)) et ouvrir le(s) nouveau(x) message(s) reçu(s)<br/> |
| E4   (10/10)          | Cliquer sur le lien situé au bas d'un des courriels reçus pour la fonctionnalité _E3_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| F1 (0/15)            | Python anywhere : <https://mohamedb.pythonanywhere.com/>  - Siteweb mentionne une erreur 502.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
__TOTAL XP__: 158/200 -> 79%

----

Grille de correction – Projet de session

Pondération :
Fonctionnalités : 60%
Qualité du projet : 40%


Fonctionnalités : 47,4%

Voir correction.md pour plus de details

Qualité : 37%
-1 par message affiché par pycodestyle jusqu’à un max de 10 pts: -0% 
Utilisation de style dans le html: -3%


Pénalités :-0% 